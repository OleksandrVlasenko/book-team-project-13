{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-df6cae6c488840a8.js","src/shopping-list.js","src/js/shopping_list/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-f5ad8e87c0c04b20.js","src/js/shopping_list/imgAdress.js","node_modules/@parcel/runtime-js/lib/runtime-cbc55ecc645ebb23.js","node_modules/@parcel/runtime-js/lib/runtime-385aaa0fe676543b.js","node_modules/@parcel/runtime-js/lib/runtime-fecb619d7c003281.js","node_modules/@parcel/runtime-js/lib/runtime-ca6fd7da2fe52cde.js","src/js/shopping_list/rendering-shng-lst.js","src/js/shopping_list/deleteBookBtn.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.c7e46e7d.js\\\",\\\"lsblX\\\":\\\"shoppingList-clear--bg-x3.9bc44f3d.png\\\",\\\"6WtvC\\\":\\\"dump.38fa3b97.svg\\\",\\\"6bwFv\\\":\\\"shoppingList--bookShop.8363c1d3.png\\\",\\\"lmhI2\\\":\\\"shoppingList--logoBook.5f2db3a0.png\\\",\\\"bpnPT\\\":\\\"shoppingList--logoAmazon.9aa609d6.png\\\",\\\"5UbS1\\\":\\\"index.c2b63b7a.css\\\",\\\"4l2W5\\\":\\\"index.d2e94420.js\\\"}\"));","import './js/preloader';\nimport './js/support-ukraine';\nimport './js/shopping_list/shopping-list';\nimport './js/toggle-color-theme';\nimport './js/menu';\nimport './js/toggle-color-theme';\nimport './js/refs';\nimport './js/shopping_list/deleteBookBtn'\nimport './js/modal-auth/modal-window-authFirebase';\nimport './js/modal-auth/firebaseAuth';","import { BooksAPI } from \"../main_page/fetch\";\nimport { books } from \"../backend-books\";\nimport { renderClearShoppingList, renderShoppingList } from \"./rendering-shng-lst\";\nimport { handleDeleteBookBtn } from \"./deleteBookBtn\";\nimport {stopPreloader} from \"../preloader\"\nimport Notiflix from 'notiflix';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from \"../modal-auth/firebaseFunction\";\n\nexport { renderCardOfBooks }\n\nconst getBook = new BooksAPI();\n\nconst galleryBooksEl = document.querySelector(`.shopping-list__gallery-boocks`);\n\nconst objBooks = books;    \nlocalStorage.setItem(`idBooks`, JSON.stringify(objBooks));    \n    \nasync function fetchBookByID(booksFromLocalStorage) {\n    try {\n            const books = await Promise.all(booksFromLocalStorage.map(async id => await getBook.getBookByID(id._id)));\n            return books;\n        } catch (error) {\n            console.log(error);\n        }\n}\n\nasync function renderCardOfBooks() {\n    const IdBooks = JSON.parse(localStorage.getItem(`idBooks`));\n    try {\n        const books = await fetchBookByID(IdBooks);\n        const data = books.map(book => book.data)\n        if (IdBooks.length === 0) {\n            return galleryBooksEl.innerHTML = renderClearShoppingList();\n        }\n        \n        galleryBooksEl.innerHTML = renderShoppingList(data);    \n        const cardBook = document.querySelector(`.shopping-list__gallery-boocks`);\n        cardBook.addEventListener(`click`, handleDeleteBookBtn);\n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nwindow.addEventListener(\"load\", () => {\n\n    onAuthStateChanged(auth, user => { \n        \n        if (user) {\n        \n            renderCardOfBooks()\n            stopPreloader();\n            return\n            \n        } else {\n            Notiflix.Notify.info(`Sign in to view your shopping list`)\n            galleryBooksEl.innerHTML = renderClearShoppingList();\n            stopPreloader();\n    \n    } \n        \n    });\n});\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lsblX\")).toString();","export { bgImagesUrl, dumpImagesUrl, bookShopImagesUrl, logoAmazonImagesUrl, logoBookImagesUrl }\n\nconst bgImagesUrl = new URL (\n    `../../images/shoppingList-clear--bg-x3.png`,    \n    import.meta.url\n);\n\nconst dumpImagesUrl = new URL (\n    `../../images/dump.svg`,    \n    import.meta.url\n);\n\nconst bookShopImagesUrl = new URL(\n    `../../images/shoppingList--bookShop.png`,\n    import.meta.url\n);\n\nconst logoBookImagesUrl = new URL(\n    `../../images/shoppingList--logoBook.png`,\n    import.meta.url\n);\nconst logoAmazonImagesUrl = new URL(\n    `../../images/shoppingList--logoAmazon.png`,\n    import.meta.url\n);","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6WtvC\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6bwFv\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lmhI2\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bpnPT\")).toString();","import { bgImagesUrl, logoAmazonImagesUrl, logoBookImagesUrl, bookShopImagesUrl, dumpImagesUrl } from \"./imgAdress\";\nexport {\n    renderShoppingList,\n    renderClearShoppingList,\n}\n\nfunction renderShoppingList(book) {\n        \n    return book.map(({ _id, book_image, author, list_name, title, description, buy_links }) => {\n    return `<li id=\"${_id}\" class=\"shopping-list__card-boock\">\n                <div class=\"shopping-list__general-information\">\n                    <div >\n                        <img class=\"shopping-list__img\" src=\"${book_image}\" alt=\"book image\">\n                        <p class=\"shopping-list__author\">${author}</p>\n                    </div>\n                        <div\">\n                            <h2 class=\"shopping-list__title-book\">${title}</h2>\n                            <h3 class=\"shopping-list__list-name\">${list_name}</h3>\n                            <p class=\"shopping-list__description--near\">${description}</p>\n                            <p class=\"shopping-list__author--near\">${author}</p>\n                            <ul class=\"shopping-list__shop-list\">\n                                <li class=\"shopping-list__shop-list-item\">\n                                    <a rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[0].url}\" target=\"_blank\">\n                                        <img class=\"shopping-list__shop-lis--img logoAmazon\" src=\"${logoAmazonImagesUrl}\" alt=\"logoAmazon\">\n                                    </a>\n                                </li>\n                                <li class=\"shopping-list__shop-list-item\">\n                                    <a rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[1].url} \" target=\"_blank\">\n                                        <img class=\"shopping-list__shop-lis--img logoBook\" src=\"${logoBookImagesUrl}\" alt=\"logoBook\">\n                                    </a>\n                                </li>\n                                <li class=\"shopping-list__shop-list-item\">\n                                    <a rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[4].url} \" target=\"_blank\">\n                                        <img class=\"shopping-list__shop-lis--img bookShop\" src=\"${bookShopImagesUrl}\" alt=\"bookShop\">\n                                    </a>\n                                </li>\n                            </ul>\n                            <img id=\"${_id}\" width=\"38\" height=\"38\" class=\"shopping-list__icon-deleteBtn\" src=\"${dumpImagesUrl}\" alt=\"icon-deleteBtn\">\n                        </div>\n                        <p class=\"shopping-list__description\">${description}</p>\n                    </div>\n                    </li>`}).join(\"\");\n}\n\nfunction renderClearShoppingList() {\n    return  `<div class=\"shopping-list__clear\">\n                <p class=\"shopping-list__clear--description\" >This page is empty, add some books and proceed to order.</p>\n                <img class=\"shopping-list__clear-bg\" src=\"${bgImagesUrl}\" alt=\"books\">\n            </div>`;\n}","import { renderCardOfBooks } from \"./shopping-list\";\n\nexport function handleDeleteBookBtn(e) {\n    const goalDeleteBtn = e.target.closest(`.shopping-list__icon-deleteBtn`);\n    \n    if (goalDeleteBtn !== e.target) {\n        return;\n    }\n        else {\n        const idBookToDelete = e.target.attributes.id.nodeValue;\n        const storedBooks = JSON.parse(localStorage.getItem(\"idBooks\"));        \n        const updatedBooks = storedBooks.filter(book => book._id !== idBookToDelete);\n        localStorage.setItem(\"idBooks\", JSON.stringify(updatedBooks));\n        renderCardOfBooks();\n    }\n}"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$bqQ6g","$f0f9d87b9e261e17$exports","URL","resolve","import","meta","url","toString","$5a479e656f3ddee1$export$c87b289691805547","$7e32215fa5bd3229$exports","$5a479e656f3ddee1$export$cb1961e01df78879","$c54e6b86c1f5cf14$exports","$5a479e656f3ddee1$export$269c3dd927dcb60b","$322993268cde74ae$exports","$5a479e656f3ddee1$export$3d7ed6dbfe6f7b3a","$a590a62f88daa765$exports","$5a479e656f3ddee1$export$9d6669fcc5ea7433","$7c750eb0708dbaf4$export$2768ac2c6633f57f","$3bad6513a6136d62$export$7bc0a1a4f9583a6f","e","target","closest","idBookToDelete","attributes","nodeValue","updatedBooks","localStorage","getItem","filter","book","_id","setItem","stringify","$f581f7b0ce7f2d4e$export$2b103d1a63f7be96","$f581f7b0ce7f2d4e$var$getBook","BooksAPI","$f581f7b0ce7f2d4e$var$galleryBooksEl","document","querySelector","$f581f7b0ce7f2d4e$var$objBooks","$eolzN","books","async","IdBooks","data","booksFromLocalStorage","Promise","all","map","getBookByID","error","console","log","$f581f7b0ce7f2d4e$var$fetchBookByID","innerHTML","book_image","author","list_name","title","description","buy_links","join","addEventListener","window","$eyjy7","onAuthStateChanged","$8mXNj","auth","user","$ioBS9","stopPreloader","$parcel$interopDefault","$7Y9D8","Notify","info"],"version":3,"file":"shopping-list.c7e46e7d.js.map"}