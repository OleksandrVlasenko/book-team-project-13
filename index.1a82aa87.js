function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},s={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},t.parcelRequired7c6=n),n("ioBS9"),n("75VGX");var a=n("bqQ6g");function i(){const e=document.documentElement.clientWidth;return e<767?"mobile":e<1279?"tablet":e>=1280?"desctop":void 0}async function r(e){return await e.data.map((({list_name:e})=>`<li class="category__home-itm" data-category="${e}">${e}</li>`)).join("")}async function l(e){return await Promise.all(e.map((async({list_name:e,books:t})=>` \n    <div class="item-books__home"> \n    <h3 class="js-book-categoty">${e}</h3> \n    <ul class='list-books__home'>${await async function(e){return"mobile"===i()?d(e.slice(0,1)):"tablet"===i()?d(await e.slice(0,3)):d(e)}(t)}</ul> \n    <button class="button see-more" data-js="${e}">See more</button> \n    </div> \n    `)))}async function c(e,t){const o=e.split(" ");return` \n  <h2 class="block__books-title">${o.splice(0,o.length/2).join(" ")} <span class="block__books-colortitle">${o.splice(o.length/2,o.length).join(" ")}</span></h2> \n        <ul class="block__books-list">${await d(t)}</ul>\n        <button class="button all-categories__btn" data-js="All Categories">All Categories</button>`}async function d(e){return e.map((({author:e,book_image:t,title:o,description:s,_id:n})=>`<li class="books__itm" id=${n} >  \n    <div class="books__wrapper"> \n    <img class="books__image" src="${t}"  alt="${s}" loading="lazy"  /> \n    <div class="books__overlay"> \n    <p class="books__overlay-text">QUICK VIEW</p> \n    </div> \n    </div> \n    <div class="books__info">  \n    <p class="books__info-title">${o}</p>  \n    <p class="books__info-author">${e}</p>  \n    </div>  \n    </li>`)).join("")}async function u(e){document.querySelector(".js-current-category").classList.remove("js-current-category"),document.querySelector(`li[data-category="${e}"]`).classList.add("js-current-category")}var m=n("ioBS9"),p=n("7Y9D8");function g(){const e=document.querySelector("[data-modal]");e.classList.add("is-active"),document.body.classList.add("no-scroll"),e.addEventListener("click",f),document.body.addEventListener("keyup",_)}function f(e){const t=document.querySelector("[data-modal]"),o=document.querySelector("[modal-window]"),s=document.querySelector("[data-modal-close]");e.composedPath().includes(o)&&e.target.closest("[data-modal-close]")!==s||(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",f),document.body.removeEventListener("keyup",_))}function _(e){const t=document.querySelector("[data-modal]");27==e.keyCode&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",f),document.body.removeEventListener("keyup",_))}p=n("7Y9D8"),a=n("bqQ6g");var b=n("4QRki"),h=n("8mXNj"),y=n("eyjy7");const k=new(0,a.BooksAPI),v=document.querySelector(".popup__book-image"),L=document.querySelector(".popup__book_title"),S=document.querySelector(".popup__book_author"),w=document.querySelector(".popup__book_review"),B=document.querySelector(".popup__shopping-links-icon.amazon"),j=document.querySelector(".popup__shopping-links-icon.book"),A=document.querySelector(".popup__shopping-links-icon.bookShop"),q=document.querySelector("#add"),x=document.querySelector(".under-btn-text");async function T(t){try{const{data:e}=await k.getBookByID(`${t}`);!function(e){let t=localStorage.getItem("idBooks");t&&""!==t&&t.includes(e._id)?(q.textContent="Remove from the shopping list",x.hidden=!1):q.textContent="Add to shopping list";q.attributes.id.value=e._id}(e),v.attributes.src.value=e.book_image,L.textContent=e.title,S.textContent=e.author,w.textContent=e.description,B.attributes.href.value=e.buy_links[0].url,j.attributes.href.value=e.buy_links[1].url,A.attributes.href.value=e.buy_links[4].url,g()}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`)}}x.hidden=!0,q.addEventListener("click",(function(e){const t=e.target.attributes.id.value;"Add to shopping list"===q.textContent?function(e){let t=localStorage.getItem("idBooks");"undefined"!==t&&t&&""!==t||(t=[],localStorage.setItem("idBooks",JSON.stringify(t)));t=JSON.parse(localStorage.getItem("idBooks")),t.push(e),localStorage.setItem("idBooks",JSON.stringify(t)),q.textContent="Remove from the shopping list",x.hidden=!1,h.auth.currentUser&&(0,b.updateShoppingList)()}(t):function(e){let t=JSON.parse(localStorage.getItem("idBooks"));t.splice(t.indexOf(e),1),localStorage.setItem("idBooks",JSON.stringify(t)),q.textContent="Add to shopping list",x.hidden=!0,h.auth.currentUser&&(0,b.updateShoppingList)()}(t)})),(0,y.onAuthStateChanged)(h.auth,(e=>{e?(q.classList.remove("disabled"),x.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".',x.hidden=!0):(q.classList.add("disabled"),x.textContent="Please, log in to get more options.",x.hidden=!1)}));const $=document.querySelector(".block__books"),C=document.querySelector(".category__home"),E=(document.querySelector(".block__category"),document.querySelector(".book-card__home"),new(0,a.BooksAPI));!async function(){try{const e=await E.getCategoryList();C.insertAdjacentHTML("beforeend",await r(e));document.querySelector("#preloader").firstElementChild.style.zIndex="1002"}catch(t){e(p).Notify.failure(`Categories was not found : ${t.message}`)}try{const e=await E.getTopBooks();$.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),$.insertAdjacentHTML("beforeend",(await l(e.data)).join("")),(0,m.stopPreloader)(),e.data}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`),(0,m.stopPreloader)()}}(),C.addEventListener("click",(async function(t){if(t.preventDefault(),t.target.classList.contains("category__home-itm")){if($.innerHTML="",$.insertAdjacentHTML("afterbegin",(0,m.addMarkupOfPreloader)()),(0,m.startPreloader)(),"All categories"===t.target.innerText){try{const e=await E.getTopBooks();$.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),$.insertAdjacentHTML("beforeend",(await l(e.data)).join("")),u(t.target.innerText),(0,m.stopPreloader)()}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`)}return}try{const e=await(await E.getOneCategory(`${t.target.innerText}`)).data;$.insertAdjacentHTML("beforeend",await c(`${t.target.innerText}`,e)),u(t.target.innerText),(0,m.stopPreloader)()}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`)}}})),$.addEventListener("click",(async function(t){t.preventDefault();const o=t.target.closest(".books__itm");if(o){T(o.attributes.id.value)}if(t.target.classList.contains("see-more")){const o=t.target.dataset.js;$.innerHTML="",$.insertAdjacentHTML("afterbegin",(0,m.addMarkupOfPreloader)()),(0,m.startPreloader)();try{const e=await(await E.getOneCategory(`${o}`)).data;$.insertAdjacentHTML("beforeend",await c(`${o}`,e)),u(`${o}`),(0,m.stopPreloader)()}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`)}}else if(t.target.classList.contains("all-categories__btn")){$.innerHTML="",$.insertAdjacentHTML("afterbegin",(0,m.addMarkupOfPreloader)()),(0,m.startPreloader)();try{const e=await E.getTopBooks();$.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),$.insertAdjacentHTML("beforeend",(await l(e.data)).join("")),(0,m.stopPreloader)(),u("All categories")}catch(t){e(p).Notify.failure(`Books was not found : ${t.message}`)}}})),n("i0beZ"),n("8mXNj");y=n("eyjy7");const I=document.querySelector(".nav__link_home"),M=document.querySelector(".nav__link_shopping"),O=document.querySelector(".auth-btns__wrapper"),N=(document.querySelector(".nav__item"),window.top.location.pathname);console.log(N),"/book-team-project-13/index.html"===N||"/index.html"===N||"/book-team-project-13/"===N||"/"===N?I.classList.add("current__page"):"/shopping-list.html"===N&&(M.classList.add("current__page"),I.classList.remove("current__page"));const P=(0,y.getAuth)();(0,y.onAuthStateChanged)(P,(e=>{e?(O.classList.remove("is-hidden"),M.classList.remove("is-hidden"),I.classList.remove("is-hidden")):(O.classList.remove("is-hidden"),M.classList.add("is-hidden"),I.classList.add("is-hidden"))})),n("krGWQ"),n("dV7Gh");var H=n("krGWQ");h=n("8mXNj"),y=n("eyjy7");n("jAzyG");b=n("4QRki");const D=(0,y.getAuth)();H.refs.submitBtn.addEventListener("click",(e=>{if(e.preventDefault(),H.refs.submitBtn.classList.contains("disabled")||H.refs.modalAuth.classList.add("is-hidden"),"Sign up"===H.refs.submitBtn.textContent){const{value:e}=document.getElementById("email"),{value:t}=document.getElementById("password"),{value:o}=document.getElementById("username");""!==e&&""!==t&&""!==o&&(0,h.signUp)(e,t,o)}else{const{value:e}=document.getElementById("email"),{value:t}=document.getElementById("password");""!==e&&""!==t&&(0,h.signIn)(e,t)}})),H.refs.userBtn.addEventListener("click",(e=>{e.preventDefault(),(0,h.singOutFunction)()})),H.refs.signOutBtn.addEventListener("click",(e=>{e.preventDefault(),(0,h.singOutFunction)()})),(0,y.onAuthStateChanged)(D,(e=>{e?(console.log("registrated"),(0,b.readUsername)(),console.log(username),H.refs.openAuthBtn.classList.add("is-hidden"),H.refs.userBtn.classList.remove("is-hidden"),H.refs.logOut.classList.remove("is-hidden"),localStorage.setItem("user-data",JSON.stringify({id:e.uid,name:e.displayName,mail:e.email}))):(console.log("not registrated"),H.refs.openAuthBtn.classList.remove("is-hidden"),H.refs.userBtn.classList.add("is-hidden"),H.refs.logOut.classList.add("is-hidden"),localStorage.removeItem("user-data"))})),n("4dIBK"),n("4QRki");
//# sourceMappingURL=index.1a82aa87.js.map
