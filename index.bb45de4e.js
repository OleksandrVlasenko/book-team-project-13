!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r),r("4smAb"),r("18VO4");var a=r("bpxeT"),s=r("2TvXO"),c=r("gN0YP");a=r("bpxeT"),s=r("2TvXO");function i(e){return l.apply(this,arguments)}function l(){return(l=e(a)(e(s).mark((function t(n){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.data.map((function(e){var t=e.list_name;return'<li class="category__home-itm" data-category="'.concat(t,'">').concat(t,"</li>")})).join("");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=e(a)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(){var t=e(a)(e(s).mark((function t(n){var o,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.list_name,r=n.books,e.t0=' \n    <div class="item-books__home"> \n    <h3 class="js-book-categoty">'.concat(o,"</h3> \n    <ul class='list-books__home'>"),e.next=4,m(r);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1,'</ul>  \n    <button class="button see-more" data-js="').concat(o,'" aria-label="See more">See more</button> \n    </div> \n    '));case 6:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return(f=e(a)(e(s).mark((function t(n,o){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.split(" "),e.t0=' \n  <h2 class="block__books-title"\n>'.concat(r.splice(0,r.length/2).join(" "),' <span class="block__books-colortitle">').concat(r.splice(r.length/2,r.length).join(" "),'</span></h2> \n        <ul class="block__books-list">'),e.next=4,m(o);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1,'</ul>\n        <button class="button all-categories__btn" data-js="All Categories" aria-label="All categories">All Categories</button>'));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=e(a)(e(s).mark((function t(n){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.map((function(e){var t=e.author,n=e.book_image,o=e.title,r=e.description,a=e._id;return'<li class="books__itm" id='.concat(a,' >  \n    <div class="books__wrapper"> \n    <img class="books__image" src="').concat(n,'"  alt="').concat(r,'" loading="lazy"  /> \n    <div class="books__overlay"> \n    <p class="books__overlay-text">QUICK VIEW</p> \n    </div> \n    </div> \n    <div class="books__info">  \n    <p class="books__info-title">').concat(o,'</p>  \n    <p class="books__info-author">').concat(t,"</p>  \n    </div>  \n    </li>")})).join(""));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=e(a)(e(s).mark((function t(n){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.querySelector(".js-current-category").classList.remove("js-current-category");case 2:document.querySelector('li[data-category="'.concat(n,'"]')).classList.add("js-current-category");case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var k=r("4smAb"),v=r("6JpON");a=r("bpxeT"),s=r("2TvXO");function y(){var e=document.querySelector("[data-modal]");e.classList.add("is-active"),document.body.classList.add("no-scroll"),e.addEventListener("click",_),document.body.addEventListener("keyup",x)}function _(e){var t=document.querySelector("[data-modal]"),n=document.querySelector("[data-modal-window]"),o=document.querySelector("[data-modal-close]");e.composedPath().includes(n)&&e.target.closest("[data-modal-close]")!==o||(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",_),document.body.removeEventListener("keyup",x))}function x(e){var t=document.querySelector("[data-modal]");27==e.keyCode&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",_),document.body.removeEventListener("keyup",x))}v=r("6JpON"),c=r("gN0YP");var w=r("bkYRy"),L=r("fOprm"),S=r("gQOBw"),T=new(0,c.BooksAPI),j=document.querySelector(".popup__book-image"),B=document.querySelector(".popup__book_title"),q=document.querySelector(".popup__book_author"),A=document.querySelector(".popup__book_review"),O=document.querySelector(".popup__shopping-links-icon.amazon"),C=document.querySelector(".popup__shopping-links-icon.book"),N=document.querySelector(".popup__shopping-links-icon.bookShop"),M=document.querySelector("#add"),P=document.querySelector(".under-btn-text");function H(e){return E.apply(this,arguments)}function E(){return(E=e(a)(e(s).mark((function t(n){var o,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.getBookByID("".concat(n));case 3:o=t.sent,I(r=o.data),j.attributes.src.value=r.book_image,B.textContent=r.title,q.textContent=r.author,A.textContent=r.description,O.attributes.href.value=r.buy_links[0].url,C.attributes.href.value=r.buy_links[1].url,N.attributes.href.value=r.buy_links[4].url,y(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),e(v).Notify.failure("Books was not found : ".concat(t.t0.message));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function I(e){var t=localStorage.getItem("idBooks");t&&""!==t&&t.includes(e._id)?(M.textContent="Remove from the shopping list",P.hidden=!1):M.textContent="Add to shopping list",M.attributes.id.value=e._id}function R(){window.scrollTo({top:0,behavior:"smooth"})}P.hidden=!0,M.addEventListener("click",(function(e){if(e.target.disabled)return;var t=e.target.attributes.id.value;"Add to shopping list"===M.textContent?function(e){var t=localStorage.getItem("idBooks");"undefined"!==t&&t&&""!==t||(t=[],localStorage.setItem("idBooks",JSON.stringify(t)));(t=JSON.parse(localStorage.getItem("idBooks"))).push(e),localStorage.setItem("idBooks",JSON.stringify(t)),M.textContent="Remove from the shopping list",P.hidden=!1,L.auth.currentUser&&(0,w.updateShoppingList)()}(t):function(e){var t=JSON.parse(localStorage.getItem("idBooks"));t.splice(t.indexOf(e),1),localStorage.setItem("idBooks",JSON.stringify(t)),M.textContent="Add to shopping list",P.hidden=!0,L.auth.currentUser&&(0,w.updateShoppingList)()}(t)})),(0,S.onAuthStateChanged)(L.auth,(function(e){e?(M.classList.remove("disabled"),M.disabled=!1,P.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".',P.hidden=!0):(M.classList.add("disabled"),M.disabled=!0,P.textContent="Please, log in to get more options.",P.hidden=!1)}));var J=document.querySelector(".block__books"),Y=document.querySelector(".category__home"),D=(document.querySelector(".block__category"),document.querySelector(".book-card__home"),new(0,c.BooksAPI));function U(){return(U=e(a)(e(s).mark((function t(){var n,o;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.getCategoryList();case 3:return n=t.sent,t.t0=Y,t.next=7,i(n);case 7:t.t1=t.sent,t.t0.insertAdjacentHTML.call(t.t0,"beforeend",t.t1),document.querySelector("#preloader").firstElementChild.style.zIndex="1002",t.next=16;break;case 13:t.prev=13,t.t2=t.catch(0),e(v).Notify.failure("Categories was not found : ".concat(t.t2.message));case 16:return t.prev=16,t.next=19,D.getTopBooks();case 19:return o=t.sent,J.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),t.t3=J,t.next=24,u(o.data);case 24:return t.t4=t.sent.join(""),t.t3.insertAdjacentHTML.call(t.t3,"beforeend",t.t4),(0,k.stopPreloader)(),t.abrupt("return",o.data);case 30:t.prev=30,t.t5=t.catch(16),e(v).Notify.failure("Books was not found : ".concat(t.t5.message)),(0,k.stopPreloader)();case 34:case"end":return t.stop()}}),t,null,[[0,13],[16,30]])})))).apply(this,arguments)}function X(){return(X=e(a)(e(s).mark((function t(n){var o,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!n.target.classList.contains("category__home-itm")){t.next=45;break}if(R(),J.innerHTML="",J.insertAdjacentHTML("afterbegin",(0,k.addMarkupOfPreloader)()),(0,k.startPreloader)(),"all categories"!==n.target.dataset.category){t.next=27;break}return t.prev=7,t.next=10,D.getTopBooks();case 10:return o=t.sent,J.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),t.t0=J,t.next=15,u(o.data);case 15:t.t1=t.sent.join(""),t.t0.insertAdjacentHTML.call(t.t0,"beforeend",t.t1),g(n.target.dataset.category),(0,k.stopPreloader)(),t.next=24;break;case 21:t.prev=21,t.t2=t.catch(7),e(v).Notify.failure("Books was not found : ".concat(t.t2.message));case 24:return t.abrupt("return");case 27:return t.prev=27,t.next=30,D.getOneCategory("".concat(n.target.dataset.category));case 30:return t.next=32,t.sent.data;case 32:return r=t.sent,t.t3=J,t.next=36,p("".concat(n.target.dataset.category),r);case 36:t.t4=t.sent,t.t3.insertAdjacentHTML.call(t.t3,"beforeend",t.t4),g(n.target.dataset.category),(0,k.stopPreloader)(),t.next=45;break;case 42:t.prev=42,t.t5=t.catch(27),e(v).Notify.failure("Books was not found : ".concat(t.t5.message));case 45:case"end":return t.stop()}}),t,null,[[7,21],[27,42]])})))).apply(this,arguments)}function z(){return(z=e(a)(e(s).mark((function t(n){var o,r,a,c;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(o=n.target.closest(".books__itm"))&&H(o.attributes.id.value),!n.target.classList.contains("see-more")){t.next=29;break}return R(),r=n.target.dataset.js,J.innerHTML="",J.insertAdjacentHTML("afterbegin",(0,k.addMarkupOfPreloader)()),(0,k.startPreloader)(),t.prev=9,t.next=12,D.getOneCategory("".concat(r));case 12:return t.next=14,t.sent.data;case 14:return a=t.sent,t.t0=J,t.next=18,p("".concat(r),a);case 18:t.t1=t.sent,t.t0.insertAdjacentHTML.call(t.t0,"beforeend",t.t1),g("".concat(r)),(0,k.stopPreloader)(),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(9),e(v).Notify.failure("Books was not found : ".concat(t.t2.message));case 27:t.next=51;break;case 29:if(!n.target.classList.contains("all-categories__btn")){t.next=51;break}return R(),J.innerHTML="",J.insertAdjacentHTML("afterbegin",(0,k.addMarkupOfPreloader)()),(0,k.startPreloader)(),t.prev=34,t.next=37,D.getTopBooks();case 37:return c=t.sent,J.insertAdjacentHTML("afterbegin",'<h2 class="block__books-title">Best Sellers<span class="block__books-colortitle"> Books</span></h2>'),t.t3=J,t.next=42,u(c.data);case 42:t.t4=t.sent.join(""),t.t3.insertAdjacentHTML.call(t.t3,"beforeend",t.t4),(0,k.stopPreloader)(),g("all categories"),t.next=51;break;case 48:t.prev=48,t.t5=t.catch(34),e(v).Notify.failure("Books was not found : ".concat(t.t5.message));case 51:case"end":return t.stop()}}),t,null,[[9,24],[34,48]])})))).apply(this,arguments)}!function(){U.apply(this,arguments)}(),Y.addEventListener("click",(function(e){return X.apply(this,arguments)})),J.addEventListener("click",(function(e){return z.apply(this,arguments)})),r("68BsN");S=r("gQOBw");var Q=document.querySelector(".nav__link_home"),K=document.querySelector(".nav__link_shopping"),V=(document.querySelector(".nav__item"),window.top.location.pathname);"/book-team-project-13/index.html"===V||"/index.html"===V||"/book-team-project-13/"===V||"/"===V?Q.classList.add("current__page"):"/shopping-list.html"===V&&(K.classList.add("current__page"),Q.classList.remove("current__page"));var F=(0,S.getAuth)();(0,S.onAuthStateChanged)(F,(function(e){e?(K.classList.remove("is-hidden"),Q.classList.remove("is-hidden")):(K.classList.add("is-hidden"),Q.classList.add("is-hidden"))})),r("4Nugj"),r("4purq"),r("kRAXI"),r("bNmPK"),r("bkYRy");var W=document.querySelector(".btn-up");W.style.display="none",window.addEventListener("scroll",(function(){window.pageYOffset>window.innerHeight/2?W.style.display="inline-flex":W.style.display="none"})),console.log(W),W.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))}();
//# sourceMappingURL=index.bb45de4e.js.map
